<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Surat Masuk - Dashboard</title>
    <link rel="stylesheet" href="assets/css/style.css" />
    <link rel="stylesheet" href="assets/css/surat-masuk.css" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css"
    />
  </head>
  <body>
    <div id="sidebar-placeholder"></div>

    <div class="main-content">
      <div id="header-placeholder"></div>
      <div class="content-container">
        <!-- LIST VIEW -->
        <div class="list-view-container" id="listViewContainer">
          <h1 class="page-title">Surat Masuk</h1>

          <div class="surat-masuk-card">
            <div class="card-header-section">
              <button class="btn-tambah" onclick="showTambahForm()">
                <i class="bi bi-plus-lg"></i>
                Tambah Baru
              </button>

              <div class="search-table">
                <input type="text" placeholder="Search" id="tableSearch" />
                <i class="bi bi-search"></i>
              </div>
            </div>

            <div class="table-responsive">
              <table class="surat-table">
                <thead>
                  <tr>
                    <th>No</th>
                    <th>Tanggal Terima</th>
                    <th>No Surat</th>
                    <th>Perihal</th>
                    <th>Dari</th>
                    <th>Kepada</th>
                    <th>Opsi</th>
                  </tr>
                </thead>
                <tbody id="tableBody"></tbody>
              </table>
            </div>

            <div class="pagination-wrapper">
              <div class="pagination-info" id="paginationInfo">
                Showing 0-0 of 0
              </div>
              <div class="pagination-controls">
                <button
                  class="pagination-btn"
                  id="prevBtn"
                  disabled
                  onclick="previousPage()"
                >
                  <i class="bi bi-chevron-left"></i>
                </button>
                <button
                  class="pagination-btn"
                  id="nextBtn"
                  onclick="nextPage()"
                >
                  <i class="bi bi-chevron-right"></i>
                </button>
              </div>
            </div>
          </div>
        </div>

        <!-- FORM VIEW -->
        <div class="form-view-container" id="formViewContainer">
          <div class="form-header">
            <h1 class="form-header-title">Form Registrasi Surat Masuk</h1>
            <div class="form-steps">
              <div class="form-step">
                <div class="step-number active" id="step1Number">1</div>
                <div class="step-label">Surat</div>
              </div>
              <div class="step-connector"></div>
              <div class="form-step">
                <div class="step-number inactive" id="step2Number">2</div>
                <div class="step-label">Tujuan</div>
              </div>
              <div class="step-connector"></div>
              <div class="form-step">
                <div class="step-number inactive" id="step3Number">3</div>
                <div class="step-label">Preview</div>
              </div>
            </div>
          </div>
          <div class="surat-masuk-card">
            <form id="suratForm">
              <div class="step-content active" id="step1Content">
                <div class="form-section">
                  <h2 class="form-section-title">IDENTITAS PENGIRIM NASKAH</h2>
                  <div class="form-grid">
                    <div class="form-group">
                      <label class="form-label">Nama Pengirim *</label>
                      <input
                        type="text"
                        class="form-input"
                        id="namaPengirim"
                        placeholder="Masukkan Nama Pengirim"
                        required
                      />
                    </div>
                    <div class="form-group">
                      <label class="form-label">Jabatan Pengirim *</label>
                      <input
                        type="text"
                        class="form-input"
                        id="jabatanPengirim"
                        placeholder="Masukkan Jabatan Pengirim"
                        required
                      />
                    </div>
                  </div>
                </div>

                <div class="form-section">
                  <h2 class="form-section-title">DETAIL ISI NASKAH</h2>
                  <div class="form-grid">
                    <div class="form-group">
                      <label class="form-label">Jenis Naskah *</label>
                      <select class="form-input" id="jenisSurat" required>
                        <option value="">Pilih Jenis Naskah</option>
                        <option value="Undangan">Undangan</option>
                        <option value="Pemberitahuan">Pemberitahuan</option>
                        <option value="Permohonan Kerja Sama">
                          Permohonan Kerja Sama
                        </option>
                        <option value="Surat Balasan">Surat Balasan</option>
                        <option value="Surat Tugas">Surat Tugas</option>
                      </select>
                    </div>
                    <div class="form-group">
                      <label class="form-label">Sifat Naskah *</label>
                      <select class="form-input" id="sifatSurat" required>
                        <option value="">Pilih Sifat Naskah...</option>
                        <option value="Umum">Umum</option>
                        <option value="Penting">Penting</option>
                        <option value="Rahasia">Rahasia</option>
                        <option value="Sangat Rahasia">Sangat Rahasia</option>
                        <option value="Konfidensial">Konfidensial</option>
                      </select>
                    </div>
                    <div class="form-group">
                      <label class="form-label">Nomor Naskah *</label>
                      <input
                        type="text"
                        class="form-input"
                        id="noSurat"
                        placeholder="Masukkan Nomor Naskah..."
                        required
                      />
                    </div>
                    <div class="form-group">
                      <label class="form-label">Perihal *</label>
                      <input
                        type="text"
                        class="form-input"
                        id="perihal"
                        placeholder="Masukkan Perihal Surat"
                        required
                      />
                    </div>
                    <div class="form-group">
                      <label class="form-label">Tanggal Naskah *</label>
                      <input
                        type="date"
                        class="form-input"
                        id="tanggalSurat"
                        required
                      />
                    </div>
                    <div class="form-group">
                      <label class="form-label">Tanggal Diterima *</label>
                      <input
                        type="date"
                        class="form-input"
                        id="tanggalDiterima"
                        required
                      />
                    </div>
                    <div class="form-group form-full">
                      <label class="form-label">Catatan</label>
                      <textarea
                        class="form-input"
                        id="catatan"
                        placeholder="Masukkan Catatan"
                        rows="4"
                      ></textarea>
                    </div>
                  </div>
                </div>

                <div class="form-section">
                  <div class="form-group form-full">
                    <label class="form-label">File Naskah *</label>
                    <div
                      class="form-upload-area"
                      id="uploadArea"
                      onclick="document.getElementById('fileInput').click()"
                    >
                      <div class="upload-icon">
                        <i class="bi bi-cloud-arrow-up"></i>
                      </div>
                      <div class="upload-text">
                        Klik untuk unggah file (PDF, DOC, DOCX)
                      </div>
                      <div id="fileInfoDisplay"></div>
                    </div>
                    <input
                      type="file"
                      id="fileInput"
                      style="display: none"
                      accept=".pdf,.doc,.docx"
                    />
                  </div>
                </div>

                <div class="form-actions">
                  <button
                    type="button"
                    class="btn-cancel"
                    onclick="closeForm()"
                  >
                    Batal
                  </button>
                  <button type="button" class="btn-next" onclick="nextStep()">
                    Selanjutnya
                  </button>
                </div>
              </div>

              <div class="step-content" id="step2Content">
                <div class="form-section">
                  <h2 class="form-section-title">TUJUAN NASKAH</h2>
                  <div class="form-grid">
                    <div class="form-group form-full">
                      <label class="form-label">Ditujukan Kepada * (Pilih minimal 1)</label>
                      <div class="kepada-checkbox-grid">
                        <label class="kepada-checkbox-item">
                          <input type="checkbox" name="kepada" value="Kepala Pusat Data Informasi dan Teknologi Kemhan" />
                          <span>Kepala Pusat Data Informasi dan Teknologi Kemhan</span>
                        </label>
                        <label class="kepada-checkbox-item">
                          <input type="checkbox" name="kepada" value="Kepala Bidang Banglola Sisfohan" />
                          <span>Kepala Bidang Banglola Sisfohan</span>
                        </label>
                        <label class="kepada-checkbox-item">
                          <input type="checkbox" name="kepada" value="Kepala Bidang Infra TIK" />
                          <span>Kepala Bidang Infra TIK</span>
                        </label>
                        <label class="kepada-checkbox-item">
                          <input type="checkbox" name="kepada" value="Kabid MSI" />
                          <span>Kabid MSI</span>
                        </label>
                        <label class="kepada-checkbox-item">
                          <input type="checkbox" name="kepada" value="Kasubbag TU" />
                          <span>Kasubbag TU</span>
                        </label>
                        <label class="kepada-checkbox-item">
                          <input type="checkbox" name="kepada" value="Staff Bidang Banglola" />
                          <span>Staff Bidang Banglola</span>
                        </label>
                        <label class="kepada-checkbox-item">
                          <input type="checkbox" name="kepada" value="Staff Bidang Infra TIK" />
                          <span>Staff Bidang Infra TIK</span>
                        </label>
                        <label class="kepada-checkbox-item">
                          <input type="checkbox" name="kepada" value="Staff MSI" />
                          <span>Staff MSI</span>
                        </label>
                      </div>
                    </div>
                    <div class="form-group form-full">
                      <label class="form-label">Catatan</label>
                      <textarea
                        class="form-input"
                        id="catatanDisposisi"
                        placeholder="Masukkan catatan untuk penerima"
                        rows="4"
                      ></textarea>
                    </div>
                  </div>
                </div>

                <div class="form-actions">
                  <button type="button" class="btn-prev" onclick="prevStep()">
                    Kembali
                  </button>
                  <button type="button" class="btn-next" onclick="nextStep()">
                    Selanjutnya
                  </button>
                </div>
              </div>

              <div class="step-content" id="step3Content">
                <div class="form-section">
                  <h2 class="form-section-title">PREVIEW SURAT MASUK</h2>

                  <div class="preview-grid">
                    <div class="preview-section">
                      <div class="preview-section-title">
                        Identitas Pengirim
                      </div>
                      <div class="preview-item">
                        <div class="preview-label">Nama Pengirim</div>
                        <div class="preview-value" id="previewNamaPengirim">
                          -
                        </div>
                      </div>
                      <div class="preview-item">
                        <div class="preview-label">Jabatan</div>
                        <div class="preview-value" id="previewJabatan">-</div>
                      </div>
                    </div>

                    <div class="preview-section">
                      <div class="preview-section-title">Detail Naskah</div>
                      <div class="preview-item">
                        <div class="preview-label">Jenis Naskah</div>
                        <div class="preview-value" id="previewJenis">-</div>
                      </div>
                      <div class="preview-item">
                        <div class="preview-label">Sifat Naskah</div>
                        <div class="preview-value" id="previewSifat">-</div>
                      </div>
                      <div class="preview-item">
                        <div class="preview-label">Nomor Surat</div>
                        <div class="preview-value" id="previewNoSurat">-</div>
                      </div>
                    </div>

                    <div class="preview-section">
                      <div class="preview-section-title">Tanggal</div>
                      <div class="preview-item">
                        <div class="preview-label">Tanggal Surat</div>
                        <div class="preview-value" id="previewTanggalSurat">
                          -
                        </div>
                      </div>
                      <div class="preview-item">
                        <div class="preview-label">Tanggal Diterima</div>
                        <div class="preview-value" id="previewTanggalDiterima">
                          -
                        </div>
                      </div>
                    </div>

                    <div class="preview-section">
                      <div class="preview-section-title">Tujuan</div>
                      <div class="preview-item">
                        <div class="preview-label">Kepada</div>
                        <div class="preview-value" id="previewKepada">-</div>
                      </div>
                    </div>

                    <div class="preview-section" style="grid-column: 1 / -1">
                      <div class="preview-section-title">Perihal & Catatan</div>
                      <div class="preview-item">
                        <div class="preview-label">Perihal</div>
                        <div class="preview-value" id="previewPerihal">-</div>
                      </div>
                      <div class="preview-item">
                        <div class="preview-label">File</div>
                        <div class="preview-value" id="previewFile">-</div>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="form-actions">
                  <button type="button" class="btn-prev" onclick="prevStep()">
                    Kembali
                  </button>
                  <button type="submit" class="btn-submit">Simpan Surat</button>
                </div>
              </div>

              <div class="step-content" id="successContent">
                <div class="success-icon">
                  <i class="bi bi-check-lg"></i>
                </div>
                <div class="success-message">
                  Surat Masuk Berhasil Disimpan!
                </div>
                <div class="form-actions">
                  <button
                    type="button"
                    class="btn-submit"
                    onclick="closeForm()"
                  >
                    Kembali ke Daftar
                  </button>
                </div>
              </div>
            </form>
          </div>
        </div>

        <!-- DETAIL PREVIEW VIEW -->
        <div class="detail-preview-view" id="detailPreviewView">
          <!-- BREADCRUMB WITH BACK BUTTON -->
          <div class="breadcrumb">
            <button class="btn-back" onclick="showListView()" title="Kembali ke Daftar">
              <i class="bi bi-arrow-left"></i>
            </button>
            <span onclick="showListView()" style="cursor: pointer">Surat Masuk</span>
            <span class="breadcrumb-separator">/</span>
            <span class="breadcrumb-current">Detail Surat</span>
          </div>

          <div class="detail-preview-layout">
            <div class="document-preview-card">
              <div class="document-title" id="documentTitle">
                Pengajuan Magang Mahasiswa Prodi Sistem Informasi
              </div>
              <div class="document-viewer">
                <i class="bi bi-file-earmark-pdf"></i>
                <div class="viewer-text">
                  Preview dokumen PDF akan ditampilkan di sini
                </div>
              </div>
              <div class="document-navigation">
                <button class="nav-doc-btn">
                  <i class="bi bi-chevron-left"></i>
                </button>
                <button class="nav-doc-btn">
                  <i class="bi bi-chevron-right"></i>
                </button>
              </div>
            </div>

            <div class="detail-info-section">
              <div class="info-detail-card">
                <div class="info-detail-header">
                  <div class="info-detail-title">Informasi Surat</div>
                  <div class="info-detail-actions">
                    <button class="icon-action-btn" title="Download">
                      <i class="bi bi-download"></i>
                    </button>
                    <button class="icon-action-btn" title="Print">
                      <i class="bi bi-printer"></i>
                    </button>
                    <button
                      class="icon-action-btn danger"
                      title="Delete"
                      onclick="hapusSurat(currentDetailId)"
                    >
                      <i class="bi bi-trash"></i>
                    </button>
                  </div>
                </div>

                <div class="info-detail-grid">
                  <div class="info-detail-item">
                    <div class="info-detail-label">Nomor Surat</div>
                    <div class="info-detail-value" id="detailNoSurat">
                      001/2025
                    </div>
                  </div>
                  <div class="info-detail-item">
                    <div class="info-detail-label">Asal Surat</div>
                    <div class="info-detail-value" id="detailAsalSurat">
                      UPN Veteran Jakarta
                    </div>
                  </div>
                  <div class="info-detail-item">
                    <div class="info-detail-label">Tanggal Surat</div>
                    <div class="info-detail-date">
                      <i class="bi bi-calendar3"></i>
                      <span id="detailTanggalSurat">01/08/2025</span>
                    </div>
                  </div>
                  <div class="info-detail-item">
                    <div class="info-detail-label">Tanggal Diterima</div>
                    <div class="info-detail-date">
                      <i class="bi bi-calendar3"></i>
                      <span id="detailTanggalDiterima">04/08/2025</span>
                    </div>
                  </div>
                  <div class="info-detail-item">
                    <div class="info-detail-label">Jenis Surat</div>
                    <span class="badge-detail badge-masuk" id="detailJenisSurat"
                      >Masuk</span
                    >
                  </div>
                  <div class="info-detail-item">
                    <div class="info-detail-label">Sifat Surat</div>
                    <span class="badge-detail badge-umum" id="detailSifatSurat"
                      >Umum</span
                    >
                  </div>
                  <div class="info-detail-item info-detail-full">
                    <div class="info-detail-label">Perihal</div>
                    <div class="info-detail-perihal" id="detailPerihal">
                      Pengajuan Magang Mahasiswa Prodi Sistem Informasi
                    </div>
                  </div>
                  <div class="info-detail-item info-detail-full">
                    <div class="info-detail-label">File</div>
                    <div class="info-detail-file">
                      <i class="bi bi-file-earmark-pdf-fill"></i>
                      <div class="file-detail-name" id="detailFileName">
                        Pengajuan_MagangMahasiswa_UPNVJ.pdf
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <div class="status-detail-card">
                <div class="status-detail-header">Status Surat</div>
                <div class="status-detail-current">
                  <div class="status-detail-label">Status Saat ini</div>
                  <span class="status-detail-badge" id="detailStatus"
                    >Proses</span
                  >
                </div>
                <div class="progress-detail-section">
                  <div class="progress-detail-wrapper">
                    <div class="progress-detail-label">
                      <span>Progress Disposisi</span>
                      <span class="progress-detail-text" id="detailProgressText"
                        >50%</span
                      >
                    </div>
                    <div class="progress-detail-bar-container">
                      <div
                        class="progress-detail-bar"
                        id="detailProgressBar"
                        style="width: 50%"
                      ></div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        <div id="footer-placeholder"></div>
      </div>

        <!-- DISPOSISI VIEW -->
        <div class="disposisi-view" id="disposisiView">
          <!-- BREADCRUMB WITH BACK BUTTON -->
          <div class="breadcrumb">
            <button class="btn-back" onclick="showListView()" title="Kembali ke Daftar">
              <i class="bi bi-arrow-left"></i>
            </button>
            <span onclick="showListView()" style="cursor: pointer">Surat Masuk</span>
            <span class="breadcrumb-separator">/</span>
            <span class="breadcrumb-current">Tindak Lanjut</span>
          </div>

          <div class="disposisi-form-card">
            <div class="disposisi-form-header">Tindak lanjut</div>

            <div class="disposisi-checkbox-grid">
              <label class="disposisi-checkbox">
                <input type="checkbox" value="1" />
                <span>1. Untuk Diketahui</span>
              </label>
              <label class="disposisi-checkbox">
                <input type="checkbox" value="7" />
                <span>7. Ambil Langkah Seperlunya</span>
              </label>
              <label class="disposisi-checkbox">
                <input type="checkbox" value="2" />
                <span>2. Untuk Diperhatikan</span>
              </label>
              <label class="disposisi-checkbox">
                <input type="checkbox" value="8" />
                <span>8. Dibicarakan</span>
              </label>
              <label class="disposisi-checkbox">
                <input type="checkbox" value="3" />
                <span>3. Untuk Dipelajari</span>
              </label>
              <label class="disposisi-checkbox">
                <input type="checkbox" value="9" />
                <span>9. Dilaporkan</span>
              </label>
              <label class="disposisi-checkbox">
                <input type="checkbox" value="4" />
                <span>4. Disiapkan Jawaban</span>
              </label>
              <label class="disposisi-checkbox">
                <input type="checkbox" value="10" />
                <span>10. Segera Selesaikan</span>
              </label>
              <label class="disposisi-checkbox">
                <input type="checkbox" value="5" />
                <span>5. Jawab Langsung</span>
              </label>
              <label class="disposisi-checkbox">
                <input type="checkbox" value="11" />
                <span>11. Arsip</span>
              </label>
              <label class="disposisi-checkbox">
                <input type="checkbox" value="6" />
                <span>6. ACC untuk ditindak lanjuti</span>
              </label>
            </div>

            <div class="disposisi-form-group">
              <label class="disposisi-form-label">Keterangan</label>
              <textarea
                class="disposisi-form-textarea"
                id="disposisiKeterangan"
                rows="4"
                placeholder="Masukkan keterangan disposisi..."
              ></textarea>
            </div>

            <div class="disposisi-form-group">
              <label class="disposisi-form-label">Kepada</label>
              <div class="disposisi-checkbox-grid">
              <label class="disposisi-checkbox">
                <input type="checkbox" value="1" />
                <span>1. Kepala Pusat Data dan Informasi</span>
              </label>
              <label class="disposisi-checkbox">
                <input type="checkbox" value="7" />
                <span>7. Kepala Subbidang Manajemen Sistem Informasi</span>
              </label>
              <label class="disposisi-checkbox">
                <input type="checkbox" value="2" />
                <span>2. Kepala Bagian Tata Usaha</span>
              </label>
              <label class="disposisi-checkbox">
                <input type="checkbox" value="8" />
                <span>8. Kepala Bidang Infrastruktur Teknologi Informasi & Komunikasi</span>
              </label>
              <label class="disposisi-checkbox">
                <input type="checkbox" value="3" />
                <span>3. Kepala Subbagian Umum</span>
              </label>
              <label class="disposisi-checkbox">
                <input type="checkbox" value="9" />
                <span>9. Kepala Subbidang Perencanaan & Pengembangan Infrastruktur</span>
              </label>
              <label class="disposisi-checkbox">
                <input type="checkbox" value="4" />
                <span>4. Kepala Bidang Banglola Sisfohan</span>
              </label>
              <label class="disposisi-checkbox">
                <input type="checkbox" value="10" />
                <span>10. Kepala Subbidang Operasional & Layanan Infrastruktur</span>
              </label>
              <label class="disposisi-checkbox">
                <input type="checkbox" value="5" />
                <span>5. Kepala Subbidang Pengembangan & Pengelolaan Aplikasi</span>
              </label>
              <label class="disposisi-checkbox">
                <input type="checkbox" value="11" />
                <span>11. Kepala Subbidang Pemeliharaan Infrastruktur</span>
              </label>
              <label class="disposisi-checkbox">
                <input type="checkbox" value="6" />
                <span>6. Kepala Subbidang Pengumpulan & Pengelolaan Data</span>
              </label>
              <label class="disposisi-checkbox">
                <input type="checkbox" value="12" />
                <span>12. Kepala Bidang Pengamanan Sistem Informasi & Persandian</span>
              </label>
            </div>

            <div class="disposisi-form-actions">
              <button class="btn-disposisi-submit" onclick="submitDisposisi()">
                Kirim
              </button>
            </div>
          </div>

          <div class="riwayat-disposisi-card">
            <div class="riwayat-header">
              <i class="bi bi-chat-left-text"></i>
              <div class="riwayat-title">Riwayat Tindak Lanjut</div>
            </div>
            <div class="riwayat-stats">
              <div class="riwayat-stat-item">
                <span class="riwayat-stat-label">Pending:</span>
                <span class="riwayat-stat-value pending" id="statPending"
                  >0</span
                >
              </div>
              <div class="riwayat-stat-item">
                <span class="riwayat-stat-label">Proses:</span>
                <span class="riwayat-stat-value proses" id="statProses">0</span>
              </div>
              <div class="riwayat-stat-item">
                <span class="riwayat-stat-label">Selesai:</span>
                <span class="riwayat-stat-value selesai" id="statSelesai"
                  >0</span
                >
              </div>
            </div>

            <div class="riwayat-list" id="riwayatDisposisiList"></div>
          </div>
        </div>
        
        <div id="footer-placeholder"></div>
      </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="assets/js/database.js"></script>
    <script src="assets/js/main.js"></script>
    <script src="assets/js/surat-masuk.js"></script>
  </body>
</html>